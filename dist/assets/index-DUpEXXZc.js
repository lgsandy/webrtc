import{a8 as dt,g as F,m as H,f as Qt,u as q,c as o,p as N,I as X,N as se,a as be,b as $e,e as g,H as we,M as ht,x as ce,d as He,J as ft,K as te,a9 as Gt,aa as pt,n as We,E as ze,r as I,t as Zt,w as ae,h as en,ab as tn,ac as nn,C as pe,z as sn,s as tt,D as rn,a5 as an,F as on,j as yt,o as ln,q as nt,Z as Pe,ad as cn,ae as un,af as dn,ag as hn,a1 as oe,a6 as mt,$ as ue,_ as Se,a7 as Ae,a2 as st}from"./index-Bs8fcxm5.js";import{m as ke,k as fn,l as Ke,w as it,x as Ne,g as _e,a as pn,n as Ye,b as yn,C as vt,D as mn,E as vn,c as gt,o as gn,p as _n,R as bn,d as wn,r as kn,s as _t,t as je,e as Cn,F as bt,G as xn,H as En,f as wt,q as Sn,V as An,L as kt,v as Rn,I as Ct,J as xt,M as Et,u as Tn,y as St,K as Bn,N as On,B as Vn,O as In,j as Pn}from"./VAvatar-B3Jnydzl.js";class Re{constructor(t){let{x:n,y:s,width:i,height:r}=t;this.x=n,this.y=s,this.width=i,this.height=r}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function Nn(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),s=n.transform;if(s){let i,r,a,l,c;if(s.startsWith("matrix3d("))i=s.slice(9,-1).split(/, /),r=+i[0],a=+i[5],l=+i[12],c=+i[13];else if(s.startsWith("matrix("))i=s.slice(7,-1).split(/, /),r=+i[0],a=+i[3],l=+i[4],c=+i[5];else return new Re(t);const h=n.transformOrigin,d=t.x-l-(1-r)*parseFloat(h),p=t.y-c-(1-a)*parseFloat(h.slice(h.indexOf(" ")+1)),b=r?t.width/r:e.offsetWidth+1,x=a?t.height/a:e.offsetHeight+1;return new Re({x:d,y:p,width:b,height:x})}else return new Re(t)}function Ln(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let s;try{s=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof s.finished>"u"&&(s.finished=new Promise(i=>{s.onfinish=()=>{i(s)}})),s}const Dn="cubic-bezier(0.4, 0, 0.2, 1)",j=Object.create(null);j.open="0";j.close="1";j.ping="2";j.pong="3";j.message="4";j.upgrade="5";j.noop="6";const ye=Object.create(null);Object.keys(j).forEach(e=>{ye[j[e]]=e});const Le={type:"error",data:"parser error"},At=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Rt=typeof ArrayBuffer=="function",Tt=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Je=({type:e,data:t},n,s)=>At&&t instanceof Blob?n?s(t):rt(t,s):Rt&&(t instanceof ArrayBuffer||Tt(t))?n?s(t):rt(new Blob([t]),s):s(j[e]+(t||"")),rt=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function at(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Te;function Fn(e,t){if(At&&e.data instanceof Blob)return e.data.arrayBuffer().then(at).then(t);if(Rt&&(e.data instanceof ArrayBuffer||Tt(e.data)))return t(at(e.data));Je(e,!1,n=>{Te||(Te=new TextEncoder),t(Te.encode(n))})}const ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",le=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ot.length;e++)le[ot.charCodeAt(e)]=e;const qn=e=>{let t=e.length*.75,n=e.length,s,i=0,r,a,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),d=new Uint8Array(h);for(s=0;s<n;s+=4)r=le[e.charCodeAt(s)],a=le[e.charCodeAt(s+1)],l=le[e.charCodeAt(s+2)],c=le[e.charCodeAt(s+3)],d[i++]=r<<2|a>>4,d[i++]=(a&15)<<4|l>>2,d[i++]=(l&3)<<6|c&63;return h},Mn=typeof ArrayBuffer=="function",Xe=(e,t)=>{if(typeof e!="string")return{type:"message",data:Bt(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Un(e.substring(1),t)}:ye[n]?e.length>1?{type:ye[n],data:e.substring(1)}:{type:ye[n]}:Le},Un=(e,t)=>{if(Mn){const n=qn(e);return Bt(n,t)}else return{base64:!0,data:e}},Bt=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Ot="",$n=(e,t)=>{const n=e.length,s=new Array(n);let i=0;e.forEach((r,a)=>{Je(r,!1,l=>{s[a]=l,++i===n&&t(s.join(Ot))})})},Hn=(e,t)=>{const n=e.split(Ot),s=[];for(let i=0;i<n.length;i++){const r=Xe(n[i],t);if(s.push(r),r.type==="error")break}return s};function Wn(){return new TransformStream({transform(e,t){Fn(e,n=>{const s=n.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Be;function de(e){return e.reduce((t,n)=>t+n.length,0)}function he(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)n[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function zn(e,t){Be||(Be=new TextDecoder);const n=[];let s=0,i=-1,r=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(s===0){if(de(n)<1)break;const c=he(n,1);r=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(de(n)<2)break;const c=he(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(de(n)<8)break;const c=he(n,8),h=new DataView(c.buffer,c.byteOffset,c.length),d=h.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Le);break}i=d*Math.pow(2,32)+h.getUint32(4),s=3}else{if(de(n)<i)break;const c=he(n,i);l.enqueue(Xe(r?c:Be.decode(c),t)),s=0}if(i===0||i>e){l.enqueue(Le);break}}}})}const Vt=4;function E(e){if(e)return Kn(e)}function Kn(e){for(var t in E.prototype)e[t]=E.prototype[t];return e}E.prototype.on=E.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};E.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};E.prototype.off=E.prototype.removeListener=E.prototype.removeAllListeners=E.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<n.length;i++)if(s=n[i],s===t||s.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};E.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,i=n.length;s<i;++s)n[s].apply(this,t)}return this};E.prototype.emitReserved=E.prototype.emit;E.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};E.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ce=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),$=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Yn="arraybuffer";function It(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const jn=$.setTimeout,Jn=$.clearTimeout;function xe(e,t){t.useNativeTimers?(e.setTimeoutFn=jn.bind($),e.clearTimeoutFn=Jn.bind($)):(e.setTimeoutFn=$.setTimeout.bind($),e.clearTimeoutFn=$.clearTimeout.bind($))}const Xn=1.33;function Qn(e){return typeof e=="string"?Gn(e):Math.ceil((e.byteLength||e.size)*Xn)}function Gn(e){let t=0,n=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function Pt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Zn(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function es(e){let t={},n=e.split("&");for(let s=0,i=n.length;s<i;s++){let r=n[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class ts extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class Qe extends E{constructor(t){super(),this.writable=!1,xe(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new ts(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Xe(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Zn(t);return n.length?"?"+n:""}}class ns extends Qe{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Hn(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$n(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Pt()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Nt=!1;try{Nt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ss=Nt;function is(){}class rs extends ns{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class Y extends E{constructor(t,n,s){super(),this.createRequest=t,xe(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=It(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Y.requestsCount++,Y.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=is,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Y.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Y.requestsCount=0;Y.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",lt);else if(typeof addEventListener=="function"){const e="onpagehide"in $?"pagehide":"unload";addEventListener(e,lt,!1)}}function lt(){for(let e in Y.requests)Y.requests.hasOwnProperty(e)&&Y.requests[e].abort()}const as=function(){const e=Lt({xdomain:!1});return e&&e.responseType!==null}();class os extends rs{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=as&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Y(Lt,this.uri(),t)}}function Lt(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||ss))return new XMLHttpRequest}catch{}if(!t)try{return new $[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Dt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ls extends Qe{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=Dt?{}:It(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;Je(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&Ce(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Pt()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Oe=$.WebSocket||$.MozWebSocket;class cs extends ls{createSocket(t,n,s){return Dt?new Oe(t,n,s):n?new Oe(t,n):new Oe(t)}doWrite(t,n){this.ws.send(n)}}class us extends Qe{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=zn(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),i=Wn();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),r())}).catch(l=>{})};r();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;this._writer.write(s).then(()=>{i&&Ce(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const ds={websocket:cs,webtransport:us,polling:os},hs=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,fs=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function De(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let i=hs.exec(e||""),r={},a=14;for(;a--;)r[fs[a]]=i[a]||"";return n!=-1&&s!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=ps(r,r.path),r.queryKey=ys(r,r.query),r}function ps(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ys(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(n[i]=r)}),n}const Fe=typeof addEventListener=="function"&&typeof removeEventListener=="function",me=[];Fe&&addEventListener("offline",()=>{me.forEach(e=>e())},!1);class Q extends E{constructor(t,n){if(super(),this.binaryType=Yn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=De(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=De(n.host).host);xe(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=es(this.opts.query)),Fe&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},me.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Vt,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Q.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Q.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(n+=Qn(i)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ce(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,i){if(typeof n=="function"&&(i=n,n=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:t,data:n,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Q.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fe&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=me.indexOf(this._offlineEventListener);s!==-1&&me.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Q.protocol=Vt;class ms extends Q{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;Q.priorWebsocketSuccess=!1;const i=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Q.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=n.name,this.emitReserved("upgradeError",b)}}))};function r(){s||(s=!0,d(),n.close(),n=null)}const a=p=>{const b=new Error("probe error: "+p);b.transport=n.name,r(),this.emitReserved("upgradeError",b)};function l(){a("transport closed")}function c(){a("socket closed")}function h(p){n&&p.name!==n.name&&r()}const d=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",l),this.off("close",c),this.off("upgrading",h)};n.once("open",i),n.once("error",a),n.once("close",l),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let vs=class extends ms{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>ds[i]).filter(i=>!!i)),super(t,s)}};function gs(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=De(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(n&&n.port===s.port?"":":"+s.port),s}const _s=typeof ArrayBuffer=="function",bs=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Ft=Object.prototype.toString,ws=typeof Blob=="function"||typeof Blob<"u"&&Ft.call(Blob)==="[object BlobConstructor]",ks=typeof File=="function"||typeof File<"u"&&Ft.call(File)==="[object FileConstructor]";function Ge(e){return _s&&(e instanceof ArrayBuffer||bs(e))||ws&&e instanceof Blob||ks&&e instanceof File}function ve(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(ve(e[n]))return!0;return!1}if(Ge(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ve(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ve(e[n]))return!0;return!1}function Cs(e){const t=[],n=e.data,s=e;return s.data=qe(n,t),s.attachments=t.length,{packet:s,buffers:t}}function qe(e,t){if(!e)return e;if(Ge(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=qe(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=qe(e[s],t));return n}return e}function xs(e,t){return e.data=Me(e.data,t),delete e.attachments,e}function Me(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Me(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Me(e[n],t));return e}const Es=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ss=5;var y;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(y||(y={}));class As{constructor(t){this.replacer=t}encode(t){return(t.type===y.EVENT||t.type===y.ACK)&&ve(t)?this.encodeAsBinary({type:t.type===y.EVENT?y.BINARY_EVENT:y.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===y.BINARY_EVENT||t.type===y.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Cs(t),s=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(s),i}}function ct(e){return Object.prototype.toString.call(e)==="[object Object]"}class Ze extends E{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===y.BINARY_EVENT;s||n.type===y.BINARY_ACK?(n.type=s?y.EVENT:y.ACK,this.reconstructor=new Rs(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ge(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(y[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===y.BINARY_EVENT||s.type===y.BINARY_ACK){const r=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const a=t.substring(r,n);if(a!=Number(a)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(t.charAt(n+1)==="/"){const r=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(r,n)}else s.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const r=n+1;for(;++n;){const a=t.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===t.length)break}s.id=Number(t.substring(r,n+1))}if(t.charAt(++n)){const r=this.tryParse(t.substr(n));if(Ze.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case y.CONNECT:return ct(n);case y.DISCONNECT:return n===void 0;case y.CONNECT_ERROR:return typeof n=="string"||ct(n);case y.EVENT:case y.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Es.indexOf(n[0])===-1);case y.ACK:case y.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Rs{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=xs(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Ts=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ze,Encoder:As,get PacketType(){return y},protocol:Ss},Symbol.toStringTag,{value:"Module"}));function z(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Bs=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qt extends E{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[z(t,"open",this.onopen.bind(this)),z(t,"packet",this.onpacket.bind(this)),z(t,"error",this.onerror.bind(this)),z(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,i,r;if(Bs.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:y.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,p=n.pop();this._registerAckCallback(d,p),a.id=d}const l=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,n){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),a=(...l)=>{this.io.clearTimeoutFn(r),n.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...n){return new Promise((s,i)=>{const r=(a,l)=>a?i(a):s(l);r.withError=!0,n.push(r),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:y.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case y.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case y.EVENT:case y.BINARY_EVENT:this.onevent(t);break;case y.ACK:case y.BINARY_ACK:this.onack(t);break;case y.DISCONNECT:this.ondisconnect();break;case y.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...i){s||(s=!0,n.packet({type:y.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function ie(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ie.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ie.prototype.reset=function(){this.attempts=0};ie.prototype.setMin=function(e){this.ms=e};ie.prototype.setMax=function(e){this.max=e};ie.prototype.setJitter=function(e){this.jitter=e};class Ue extends E{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,xe(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ie({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||Ts;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new vs(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=z(n,"open",function(){s.onopen(),t&&t()}),r=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=z(n,"error",r);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(z(t,"ping",this.onping.bind(this)),z(t,"data",this.ondata.bind(this)),z(t,"error",this.onerror.bind(this)),z(t,"close",this.onclose.bind(this)),z(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Ce(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new qt(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const re={};function ge(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=gs(e,t.path||"/socket.io"),s=n.source,i=n.id,r=n.path,a=re[i]&&r in re[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return l?c=new Ue(s,t):(re[i]||(re[i]=new Ue(s,t)),c=re[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(ge,{Manager:Ue,Socket:qt,io:ge,connect:ge});const Ee=dt({connected:!1,fooEvents:[],barEvents:[]}),T=ge();T.on("connect",()=>{Ee.connected=!0});T.on("disconnect",()=>{Ee.connected=!1});T.on("foo",(...e)=>{Ee.fooEvents.push(e)});T.on("bar",(...e)=>{Ee.barEvents.push(e)});dt({connected:!1});const P=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),Os=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Vs=F()({name:"VCardActions",props:H(),setup(e,t){let{slots:n}=t;return Qt({VBtn:{slim:!0,variant:"text"}}),q(()=>{var s;return o("div",{class:["v-card-actions",e.class],style:e.style},[(s=n.default)==null?void 0:s.call(n)])}),{}}}),Is=N({opacity:[Number,String],...H(),...ke()},"VCardSubtitle"),Ps=F()({name:"VCardSubtitle",props:Is(),setup(e,t){let{slots:n}=t;return q(()=>o(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},n)),{}}}),Ns=fn("v-card-title"),Ls=N({appendAvatar:String,appendIcon:X,prependAvatar:String,prependIcon:X,subtitle:[String,Number],title:[String,Number],...H(),...Ke()},"VCardItem"),Ds=F()({name:"VCardItem",props:Ls(),setup(e,t){let{slots:n}=t;return q(()=>{var h;const s=!!(e.prependAvatar||e.prependIcon),i=!!(s||n.prepend),r=!!(e.appendAvatar||e.appendIcon),a=!!(r||n.append),l=!!(e.title!=null||n.title),c=!!(e.subtitle!=null||n.subtitle);return o("div",{class:["v-card-item",e.class],style:e.style},[i&&o("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?o(_e,{key:"prepend-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):o(se,null,[e.prependAvatar&&o(it,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&o(Ne,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),o("div",{class:"v-card-item__content"},[l&&o(Ns,{key:"title"},{default:()=>{var d;return[((d=n.title)==null?void 0:d.call(n))??e.title]}}),c&&o(Ps,{key:"subtitle"},{default:()=>{var d;return[((d=n.subtitle)==null?void 0:d.call(n))??e.subtitle]}}),(h=n.default)==null?void 0:h.call(n)]),a&&o("div",{key:"append",class:"v-card-item__append"},[n.append?o(_e,{key:"append-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):o(se,null,[e.appendIcon&&o(Ne,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&o(it,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),Fs=N({opacity:[Number,String],...H(),...ke()},"VCardText"),Mt=F()({name:"VCardText",props:Fs(),setup(e,t){let{slots:n}=t;return q(()=>o(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},n)),{}}}),qs=N({appendAvatar:String,appendIcon:X,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:X,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...pn(),...H(),...Ke(),...Ye(),...yn(),...vt(),...mn(),...vn(),...gt(),...gn(),...ke(),...be(),..._n({variant:"elevated"})},"VCard"),Ms=F()({name:"VCard",directives:{Ripple:bn},props:qs(),setup(e,t){let{attrs:n,slots:s}=t;const{themeClasses:i}=$e(e),{borderClasses:r}=wn(e),{colorClasses:a,colorStyles:l,variantClasses:c}=kn(e),{densityClasses:h}=_t(e),{dimensionStyles:d}=je(e),{elevationClasses:p}=Cn(e),{loaderClasses:b}=bt(e),{locationStyles:x}=xn(e),{positionClasses:O}=En(e),{roundedClasses:u}=wt(e),m=Sn(e,n),v=g(()=>e.link!==!1&&m.isLink.value),k=g(()=>!e.disabled&&e.link!==!1&&(e.link||m.isClickable.value));return q(()=>{const f=v.value?"a":e.tag,w=!!(s.title||e.title!=null),B=!!(s.subtitle||e.subtitle!=null),_=w||B,C=!!(s.append||e.appendAvatar||e.appendIcon),A=!!(s.prepend||e.prependAvatar||e.prependIcon),V=!!(s.image||e.image),K=_||A||C,W=!!(s.text||e.text!=null);return we(o(f,ce({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":k.value},i.value,r.value,a.value,h.value,p.value,b.value,O.value,u.value,c.value,e.class],style:[l.value,d.value,x.value,e.style],onClick:k.value&&m.navigate,tabindex:e.disabled?-1:void 0},m.linkProps),{default:()=>{var J;return[V&&o("div",{key:"image",class:"v-card__image"},[s.image?o(_e,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},s.image):o(An,{key:"image-img",cover:!0,src:e.image},null)]),o(kt,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:s.loader}),K&&o(Ds,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:s.item,prepend:s.prepend,title:s.title,subtitle:s.subtitle,append:s.append}),W&&o(Mt,{key:"text"},{default:()=>{var L;return[((L=s.text)==null?void 0:L.call(s))??e.text]}}),(J=s.default)==null?void 0:J.call(s),s.actions&&o(Vs,null,{default:s.actions}),Rn(k.value,"v-card")]}}),[[ht("ripple"),k.value&&e.ripple]])}),{}}}),Us=N({fluid:{type:Boolean,default:!1},...H(),...Ye(),...ke()},"VContainer"),$s=F()({name:"VContainer",props:Us(),setup(e,t){let{slots:n}=t;const{rtlClasses:s}=He(),{dimensionStyles:i}=je(e);return q(()=>o(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},s.value,e.class],style:[i.value,e.style]},n)),{}}}),Hs=N({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...H(),...Ct({transition:{component:xt}})},"VCounter"),Ws=F()({name:"VCounter",functional:!0,props:Hs(),setup(e,t){let{slots:n}=t;const s=g(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return q(()=>o(Et,{transition:e.transition},{default:()=>[we(o("div",{class:["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class],style:e.style},[n.default?n.default({counter:s.value,max:e.max,value:e.value}):s.value]),[[ft,e.active]])]})),{}}}),zs=N({text:String,onClick:te(),...H(),...be()},"VLabel"),Ks=F()({name:"VLabel",props:zs(),setup(e,t){let{slots:n}=t;return q(()=>{var s;return o("label",{class:["v-label",{"v-label--clickable":!!e.onClick},e.class],style:e.style,onClick:e.onClick},[e.text,(s=n.default)==null?void 0:s.call(n)])}),{}}}),Ys=N({floating:Boolean,...H()},"VFieldLabel"),fe=F()({name:"VFieldLabel",props:Ys(),setup(e,t){let{slots:n}=t;return q(()=>o(Ks,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},n)),{}}});function Ut(e){const{t}=Gt();function n(s){let{name:i}=s;const r={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],a=e[`onClick:${i}`],l=a&&r?t(`$vuetify.input.${r}`,e.label??""):void 0;return o(Ne,{icon:e[`${i}Icon`],"aria-label":l,onClick:a},null)}return{InputIcon:n}}const $t=N({focused:Boolean,"onUpdate:focused":te()},"focus");function Ht(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt();const n=We(e,"focused"),s=g(()=>({[`${t}--focused`]:n.value}));function i(){n.value=!0}function r(){n.value=!1}return{focusClasses:s,isFocused:n,focus:i,blur:r}}const js=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Wt=N({appendInnerIcon:X,bgColor:String,clearable:Boolean,clearIcon:{type:X,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:X,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>js.includes(e)},"onClick:clear":te(),"onClick:appendInner":te(),"onClick:prependInner":te(),...H(),...vt(),...gt(),...be()},"VField"),zt=F()({name:"VField",inheritAttrs:!1,props:{id:String,...$t(),...Wt()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:s,slots:i}=t;const{themeClasses:r}=$e(e),{loaderClasses:a}=bt(e),{focusClasses:l,isFocused:c,focus:h,blur:d}=Ht(e),{InputIcon:p}=Ut(e),{roundedClasses:b}=wt(e),{rtlClasses:x}=He(),O=g(()=>e.dirty||e.active),u=g(()=>!e.singleLine&&!!(e.label||i.label)),m=ze(),v=g(()=>e.id||`input-${m}`),k=g(()=>`${v.value}-messages`),f=I(),w=I(),B=I(),_=g(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:C,backgroundColorStyles:A}=Tn(Zt(e,"bgColor")),{textColorClasses:V,textColorStyles:K}=St(g(()=>e.error||e.disabled?void 0:O.value&&c.value?e.color:e.baseColor));ae(O,S=>{if(u.value){const R=f.value.$el,D=w.value.$el;requestAnimationFrame(()=>{const M=Nn(R),U=D.getBoundingClientRect(),ne=U.x-M.x,G=U.y-M.y-(M.height/2-U.height/2),Z=U.width/.75,ee=Math.abs(Z-M.width)>1?{maxWidth:en(Z)}:void 0,Yt=getComputedStyle(R),et=getComputedStyle(D),jt=parseFloat(Yt.transitionDuration)*1e3||150,Jt=parseFloat(et.getPropertyValue("--v-field-label-scale")),Xt=et.getPropertyValue("color");R.style.visibility="visible",D.style.visibility="hidden",Ln(R,{transform:`translate(${ne}px, ${G}px) scale(${Jt})`,color:Xt,...ee},{duration:jt,easing:Dn,direction:S?"normal":"reverse"}).finished.then(()=>{R.style.removeProperty("visibility"),D.style.removeProperty("visibility")})})}},{flush:"post"});const W=g(()=>({isActive:O,isFocused:c,controlRef:B,blur:d,focus:h}));function J(S){S.target!==document.activeElement&&S.preventDefault()}function L(S){var R;S.key!=="Enter"&&S.key!==" "||(S.preventDefault(),S.stopPropagation(),(R=e["onClick:clear"])==null||R.call(e,new MouseEvent("click")))}return q(()=>{var ne,G,Z;const S=e.variant==="outlined",R=!!(i["prepend-inner"]||e.prependInnerIcon),D=!!(e.clearable||i.clear)&&!e.disabled,M=!!(i["append-inner"]||e.appendInnerIcon||D),U=()=>i.label?i.label({...W.value,label:e.label,props:{for:v.value}}):e.label;return o("div",ce({class:["v-field",{"v-field--active":O.value,"v-field--appended":M,"v-field--center-affix":e.centerAffix??!_.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":R,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!U(),[`v-field--variant-${e.variant}`]:!0},r.value,C.value,l.value,a.value,b.value,x.value,e.class],style:[A.value,e.style],onClick:J},n),[o("div",{class:"v-field__overlay"},null),o(kt,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:i.loader}),R&&o("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&o(p,{key:"prepend-icon",name:"prependInner"},null),(ne=i["prepend-inner"])==null?void 0:ne.call(i,W.value)]),o("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&u.value&&o(fe,{key:"floating-label",ref:w,class:[V.value],floating:!0,for:v.value,style:K.value},{default:()=>[U()]}),u.value&&o(fe,{key:"label",ref:f,for:v.value},{default:()=>[U()]}),(G=i.default)==null?void 0:G.call(i,{...W.value,props:{id:v.value,class:"v-field__input","aria-describedby":k.value},focus:h,blur:d})]),D&&o(Bn,{key:"clear"},{default:()=>[we(o("div",{class:"v-field__clearable",onMousedown:ee=>{ee.preventDefault(),ee.stopPropagation()}},[o(_e,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[i.clear?i.clear({...W.value,props:{onKeydown:L,onFocus:h,onBlur:d,onClick:e["onClick:clear"]}}):o(p,{name:"clear",onKeydown:L,onFocus:h,onBlur:d},null)]})]),[[ft,e.dirty]])]}),M&&o("div",{key:"append",class:"v-field__append-inner"},[(Z=i["append-inner"])==null?void 0:Z.call(i,W.value),e.appendInnerIcon&&o(p,{key:"append-icon",name:"appendInner"},null)]),o("div",{class:["v-field__outline",V.value],style:K.value},[S&&o(se,null,[o("div",{class:"v-field__outline__start"},null),u.value&&o("div",{class:"v-field__outline__notch"},[o(fe,{ref:w,floating:!0,for:v.value},{default:()=>[U()]})]),o("div",{class:"v-field__outline__end"},null)]),_.value&&u.value&&o(fe,{ref:w,floating:!0,for:v.value},{default:()=>[U()]})])])}),{controlRef:B}}});function Js(e){const t=Object.keys(zt.props).filter(n=>!tn(n)&&n!=="class"&&n!=="style");return nn(e,t)}const Xs=N({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...H(),...Ct({transition:{component:xt,leaveAbsolute:!0,group:!0}})},"VMessages"),Qs=F()({name:"VMessages",props:Xs(),setup(e,t){let{slots:n}=t;const s=g(()=>pe(e.messages)),{textColorClasses:i,textColorStyles:r}=St(g(()=>e.color));return q(()=>o(Et,{transition:e.transition,tag:"div",class:["v-messages",i.value,e.class],style:[r.value,e.style],role:"alert","aria-live":"polite"},{default:()=>[e.active&&s.value.map((a,l)=>o("div",{class:"v-messages__message",key:`${l}-${s.value}`},[n.message?n.message({message:a}):a]))]})),{}}}),Gs=Symbol.for("vuetify:form");function Zs(e){const t=sn(Gs,null);return{...t,isReadonly:g(()=>!!((e==null?void 0:e.readonly)??(t==null?void 0:t.isReadonly.value))),isDisabled:g(()=>!!((e==null?void 0:e.disabled)??(t==null?void 0:t.isDisabled.value)))}}const ei=N({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...$t()},"validation");function ti(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ze();const s=We(e,"modelValue"),i=g(()=>e.validationValue===void 0?s.value:e.validationValue),r=Zs(e),a=I([]),l=tt(!0),c=g(()=>!!(pe(s.value===""?null:s.value).length||pe(i.value===""?null:i.value).length)),h=g(()=>{var f;return(f=e.errorMessages)!=null&&f.length?pe(e.errorMessages).concat(a.value).slice(0,Math.max(0,+e.maxErrors)):a.value}),d=g(()=>{var B;let f=(e.validateOn??((B=r.validateOn)==null?void 0:B.value))||"input";f==="lazy"&&(f="input lazy"),f==="eager"&&(f="input eager");const w=new Set((f==null?void 0:f.split(" "))??[]);return{input:w.has("input"),blur:w.has("blur")||w.has("input")||w.has("invalid-input"),invalidInput:w.has("invalid-input"),lazy:w.has("lazy"),eager:w.has("eager")}}),p=g(()=>{var f;return e.error||(f=e.errorMessages)!=null&&f.length?!1:e.rules.length?l.value?a.value.length||d.value.lazy?null:!0:!a.value.length:!0}),b=tt(!1),x=g(()=>({[`${t}--error`]:p.value===!1,[`${t}--dirty`]:c.value,[`${t}--disabled`]:r.isDisabled.value,[`${t}--readonly`]:r.isReadonly.value})),O=rn("validation"),u=g(()=>e.name??an(n));on(()=>{var f;(f=r.register)==null||f.call(r,{id:u.value,vm:O,validate:k,reset:m,resetValidation:v})}),yt(()=>{var f;(f=r.unregister)==null||f.call(r,u.value)}),ln(async()=>{var f;d.value.lazy||await k(!d.value.eager),(f=r.update)==null||f.call(r,u.value,p.value,h.value)}),nt(()=>d.value.input||d.value.invalidInput&&p.value===!1,()=>{ae(i,()=>{if(i.value!=null)k();else if(e.focused){const f=ae(()=>e.focused,w=>{w||k(),f()})}})}),nt(()=>d.value.blur,()=>{ae(()=>e.focused,f=>{f||k()})}),ae([p,h],()=>{var f;(f=r.update)==null||f.call(r,u.value,p.value,h.value)});async function m(){s.value=null,await Pe(),await v()}async function v(){l.value=!0,d.value.lazy?a.value=[]:await k(!d.value.eager)}async function k(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const w=[];b.value=!0;for(const B of e.rules){if(w.length>=+(e.maxErrors??1))break;const C=await(typeof B=="function"?B:()=>B)(i.value);if(C!==!0){if(C!==!1&&typeof C!="string"){console.warn(`${C} is not a valid value. Rule functions must return boolean true or a string.`);continue}w.push(C||"")}}return a.value=w,b.value=!1,l.value=f,a.value}return{errorMessages:h,isDirty:c,isDisabled:r.isDisabled,isReadonly:r.isReadonly,isPristine:l,isValid:p,isValidating:b,reset:m,resetValidation:v,validate:k,validationClasses:x}}const Kt=N({id:String,appendIcon:X,centerAffix:{type:Boolean,default:!0},prependIcon:X,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":te(),"onClick:append":te(),...H(),...Ke(),...cn(Ye(),["maxWidth","minWidth","width"]),...be(),...ei()},"VInput"),ut=F()({name:"VInput",props:{...Kt()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:s,emit:i}=t;const{densityClasses:r}=_t(e),{dimensionStyles:a}=je(e),{themeClasses:l}=$e(e),{rtlClasses:c}=He(),{InputIcon:h}=Ut(e),d=ze(),p=g(()=>e.id||`input-${d}`),b=g(()=>`${p.value}-messages`),{errorMessages:x,isDirty:O,isDisabled:u,isReadonly:m,isPristine:v,isValid:k,isValidating:f,reset:w,resetValidation:B,validate:_,validationClasses:C}=ti(e,"v-input",p),A=g(()=>({id:p,messagesId:b,isDirty:O,isDisabled:u,isReadonly:m,isPristine:v,isValid:k,isValidating:f,reset:w,resetValidation:B,validate:_})),V=g(()=>{var K;return(K=e.errorMessages)!=null&&K.length||!v.value&&x.value.length?x.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return q(()=>{var S,R,D,M;const K=!!(s.prepend||e.prependIcon),W=!!(s.append||e.appendIcon),J=V.value.length>0,L=!e.hideDetails||e.hideDetails==="auto"&&(J||!!s.details);return o("div",{class:["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--hide-spin-buttons":e.hideSpinButtons},r.value,l.value,c.value,C.value,e.class],style:[a.value,e.style]},[K&&o("div",{key:"prepend",class:"v-input__prepend"},[(S=s.prepend)==null?void 0:S.call(s,A.value),e.prependIcon&&o(h,{key:"prepend-icon",name:"prepend"},null)]),s.default&&o("div",{class:"v-input__control"},[(R=s.default)==null?void 0:R.call(s,A.value)]),W&&o("div",{key:"append",class:"v-input__append"},[e.appendIcon&&o(h,{key:"append-icon",name:"append"},null),(D=s.append)==null?void 0:D.call(s,A.value)]),L&&o("div",{class:"v-input__details"},[o(Qs,{id:b.value,active:J,messages:V.value},{message:s.message}),(M=s.details)==null?void 0:M.call(s,A.value)])])}),{reset:w,resetValidation:B,validate:_,isValid:k,errorMessages:x}}}),Ve=Symbol("Forwarded refs");function Ie(e,t){let n=e;for(;n;){const s=Reflect.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function ni(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return e[Ve]=n,new Proxy(e,{get(i,r){if(Reflect.has(i,r))return Reflect.get(i,r);if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const a of n)if(a.value&&Reflect.has(a.value,r)){const l=Reflect.get(a.value,r);return typeof l=="function"?l.bind(a.value):l}}},has(i,r){if(Reflect.has(i,r))return!0;if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,r))return!0;return!1},set(i,r,a){if(Reflect.has(i,r))return Reflect.set(i,r,a);if(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))return!1;for(const l of n)if(l.value&&Reflect.has(l.value,r))return Reflect.set(l.value,r,a);return!1},getOwnPropertyDescriptor(i,r){var l;const a=Reflect.getOwnPropertyDescriptor(i,r);if(a)return a;if(!(typeof r=="symbol"||r.startsWith("$")||r.startsWith("__"))){for(const c of n){if(!c.value)continue;const h=Ie(c.value,r)??("_"in c.value?Ie((l=c.value._)==null?void 0:l.setupState,r):void 0);if(h)return h}for(const c of n){const h=c.value&&c.value[Ve];if(!h)continue;const d=h.slice();for(;d.length;){const p=d.shift(),b=Ie(p.value,r);if(b)return b;const x=p.value&&p.value[Ve];x&&d.push(...x)}}}}})}const si=["color","file","time","date","datetime-local","week","month"],ii=N({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Kt(),...Wt()},"VTextField"),ri=F()({name:"VTextField",directives:{Intersect:On},inheritAttrs:!1,props:ii(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:s,slots:i}=t;const r=We(e,"modelValue"),{isFocused:a,focus:l,blur:c}=Ht(e),h=g(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:(r.value??"").toString().length),d=g(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),p=g(()=>["plain","underlined"].includes(e.variant));function b(_,C){var A,V;!e.autofocus||!_||(V=(A=C[0].target)==null?void 0:A.focus)==null||V.call(A)}const x=I(),O=I(),u=I(),m=g(()=>si.includes(e.type)||e.persistentPlaceholder||a.value||e.active);function v(){var _;u.value!==document.activeElement&&((_=u.value)==null||_.focus()),a.value||l()}function k(_){s("mousedown:control",_),_.target!==u.value&&(v(),_.preventDefault())}function f(_){v(),s("click:control",_)}function w(_){_.stopPropagation(),v(),Pe(()=>{r.value=null,hn(e["onClick:clear"],_)})}function B(_){var A;const C=_.target;if(r.value=C.value,(A=e.modelModifiers)!=null&&A.trim&&["text","search","password","tel","url"].includes(e.type)){const V=[C.selectionStart,C.selectionEnd];Pe(()=>{C.selectionStart=V[0],C.selectionEnd=V[1]})}}return q(()=>{const _=!!(i.counter||e.counter!==!1&&e.counter!=null),C=!!(_||i.details),[A,V]=un(n),{modelValue:K,...W}=ut.filterProps(e),J=Js(e);return o(ut,ce({ref:x,modelValue:r.value,"onUpdate:modelValue":L=>r.value=L,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":p.value},e.class],style:e.style},A,W,{centerAffix:!p.value,focused:a.value}),{...i,default:L=>{let{id:S,isDisabled:R,isDirty:D,isReadonly:M,isValid:U}=L;return o(zt,ce({ref:O,onMousedown:k,onClick:f,"onClick:clear":w,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},J,{id:S.value,active:m.value||D.value,dirty:D.value||e.dirty,disabled:R.value,focused:a.value,error:U.value===!1}),{...i,default:ne=>{let{props:{class:G,...Z}}=ne;const ee=we(o("input",ce({ref:u,value:r.value,onInput:B,autofocus:e.autofocus,readonly:M.value,disabled:R.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:v,onBlur:c},Z,V),null),[[ht("intersect"),{handler:b},null,{once:!0}]]);return o(se,null,[e.prefix&&o("span",{class:"v-text-field__prefix"},[o("span",{class:"v-text-field__prefix__text"},[e.prefix])]),i.default?o("div",{class:G,"data-no-activator":""},[i.default(),ee]):dn(ee,{class:G}),e.suffix&&o("span",{class:"v-text-field__suffix"},[o("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:C?L=>{var S;return o(se,null,[(S=i.details)==null?void 0:S.call(i,L),_&&o(se,null,[o("span",null,null),o(Ws,{active:e.persistentCounter||a.value,value:h.value,max:d.value,disabled:e.disabled},i.counter)])])}:void 0})}),ni({},x,O,u)}}),ai={key:0,class:"d-flex justify-center py-2"},oi={key:1,class:"remote-video"},li={key:2,class:"d-flex justify-center py-2"},ci={__name:"HelloWorld",setup(e){const t=Vn(),n=I(),s=I(),i=I(""),r=I(!0),a=I([]),l=I(),c=I(!1);let h=I([]);const d=()=>{T.emit("join-user",i.value),r.value=!1,t.setUserName(i.value),p()},p=async()=>{try{const u=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0});l.value=u,n.value.srcObject=u,u.getTracks().forEach(m=>{P.addTrack(m,u)})}catch(u){console.log("stream err",u)}},b=async u=>{try{const m=await P.createOffer();console.log(m),await P.setLocalDescription(m),T.emit("offer",{from:i.value,to:u,offer:P.localDescription})}catch(m){console.log("offer create error",m)}},x=()=>{P&&P.close(),T.emit("call-ended",h.value),c.value=!1};T.on("joined",u=>{a.value=[];for(const m in u)a.value.push(u[m]);t.setUserList(a.value)}),T.on("offer",async({from:u,to:m,offer:v})=>{await P.setRemoteDescription(v);const k=P.createAnswer();await P.setLocalDescription(k),T.emit("answer",{from:u,to:m,answer:P.localDescription}),h.value=[u,m]}),T.on("answer",async({from:u,to:m,answer:v})=>{console.log(u,m,v),await P.setRemoteDescription(v),c.value=!0,T.emit("end-call",{from:u,to:m}),h.value=[u,m]}),T.on("icecandidate",async u=>{console.log("icc",u),await P.addIceCandidate(new RTCIceCandidate(u))}),T.on("end-call",({from:u,to:m})=>{c.value=!0}),T.on("call-ended",u=>{x()}),P.ontrack=function(u){s.value.srcObject=u.streams[0]},P.onicecandidate=function(u){u.candidate&&T.emit("icecandidate",u.candidate)};const O=t.$onAction(({name:u,store:m,args:v})=>{console.log(`Start "${u}"`,v),u=="startCallHandler"&&b(v[0])});return yt(()=>{O(),T.disconnect()}),(u,m)=>(oe(),mt($s,{class:"fill-height"},{default:ue(()=>[o(In,{class:"fill-height mx-auto"},{default:ue(()=>[r.value?(oe(),Se("div",ai,[o(ri,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=v=>i.value=v),"append-inner-icon":"mdi-plus-circle",variant:"outlined",label:"User Name","max-width":"500","onClick:appendInner":d},null,8,["modelValue"])])):Ae("",!0),o(Ms,{title:"Remote video",variant:"outlined","max-height":"600"},{default:ue(()=>[o(Mt,null,{default:ue(()=>[st("video",{ref_key:"remoteVideoTag",ref:s,autoplay:""},null,512)]),_:1})]),_:1}),r.value?Ae("",!0):(oe(),Se("div",oi,[st("video",{ref_key:"myVideoTag",ref:n,autoplay:""},null,512)])),c.value?(oe(),Se("div",li,[o(Pn,{color:"red",icon:"mdi-phone",variant:"text",onClick:x})])):Ae("",!0)]),_:1})]),_:1}))}},ui=Os(ci,[["__scopeId","data-v-5ce2937c"]]),pi={__name:"index",setup(e){return(t,n)=>{const s=ui;return oe(),mt(s)}}};export{pi as default};
